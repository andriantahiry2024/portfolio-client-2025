import{j as e}from"./ui-components-DfywtIQG.js";import{r as s}from"./react-vendor-CAIQhEhM.js";import{f as M}from"./Navbar-BQAmc0tr.js";import{D as P,i as I,a as R,f as A}from"./date-utils-GrcKZ4MX.js";import{d as p,e as S,u as F,B as _}from"./index-t7G3PbYA.js";import{a as B,C as H}from"./chevron-right-hQ4CyFpB.js";import{C as V,a as q,b as O,d as J,c as U,e as $}from"./card-RFugcynZ.js";import{I as D}from"./input-Co4X8K3-.js";import{L as u}from"./label-Do9NwOMi.js";import{A as k,m as f}from"./framer-motion-DP8BS7SU.js";import"./x-BZOIuSDk.js";function z({className:r,classNames:n,showOutsideDays:i=!0,...d}){return e.jsx(P,{showOutsideDays:i,className:p("p-3",r),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:p(S({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:p(S({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100 dark:text-foreground"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...n},components:{IconLeft:({...o})=>e.jsx(H,{className:"h-4 w-4"}),IconRight:({...o})=>e.jsx(B,{className:"h-4 w-4"})},...d})}z.displayName="Calendar";const G=[{time:"09:00",available:!0},{time:"10:00",available:!0},{time:"11:00",available:!0},{time:"14:00",available:!0},{time:"15:00",available:!0},{time:"16:00",available:!0}];function ie(){const[r,n]=s.useState(),[i,d]=s.useState(),[o,h]=s.useState(""),[l,y]=s.useState(""),[v,g]=s.useState(""),[b,j]=s.useState(!1),[w,x]=s.useState("idle"),[E,N]=s.useState(""),{toast:C}=F(),T=s.useCallback(a=>{const c=new Date;c.setHours(0,0,0,0);const t=a.getDay();return I(a,c)||t===0||t===6},[]),L=async a=>{if(a.preventDefault(),!r||!i||!o||!l)return;j(!0),x("idle"),N("");const c={date:A(r,"dd/MM/yyyy"),time:i,name:o,email:l,message:v};try{const t=await M("/appointments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!t.ok){const m=await t.json();throw new Error(m.error||`HTTP error! status: ${t.status}`)}x("success"),C({title:"Rendez-vous confirmé",description:"Votre demande de rendez-vous a été envoyée avec succès. Nous vous contacterons bientôt.",variant:"success"}),n(void 0),d(void 0),h(""),y(""),g("")}catch(t){console.error("Erreur lors de la prise de rendez-vous:",t),x("error");const m=t.message||"Une erreur est survenue.";N(m),C({title:"Erreur",description:m,variant:"destructive"})}finally{j(!1)}};return e.jsxs(V,{className:"w-full max-w-2xl mx-auto bg-card text-card-foreground",children:[e.jsx("h1",{className:"text-center mt-10 text-2xl font-bold",children:"Prendre un rendez-vous"}),e.jsxs(q,{children:[e.jsx(O,{children:"Prendre un rendez-vous"}),e.jsx(J,{children:"Choisissez une date et un créneau horaire pour planifier notre rencontre."})]}),e.jsx(U,{children:e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(z,{mode:"single",selected:r,onSelect:n,disabled:T,locale:R,className:"rounded-md border"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Créneaux disponibles"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.jsx(k,{children:G.map(a=>e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:e.jsx(_,{type:"button",variant:i===a.time?"default":"outline",className:p("w-full dark:text-white",!a.available&&"opacity-50 cursor-not-allowed"),onClick:()=>a.available&&d(a.time),disabled:!a.available,children:a.time})},a.time))})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"name",children:"Nom complet"}),e.jsx(D,{id:"name",value:o,onChange:a=>h(a.target.value),placeholder:"Votre nom",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"email",children:"Email"}),e.jsx(D,{id:"email",type:"email",value:l,onChange:a=>y(a.target.value),placeholder:"votre@email.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"message",children:"Message (optionnel)"}),e.jsx("textarea",{id:"message",value:v,onChange:a=>g(a.target.value),placeholder:"Détails supplémentaires...",className:"w-full min-h-[100px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(_,{type:"submit",disabled:!r||!i||!o||!l||b,className:"w-full md:w-auto",children:b?"Envoi en cours...":"Confirmer le rendez-vous"})}),e.jsxs(k,{children:[w==="success"&&e.jsx(f.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-green-600 dark:text-green-400 text-center",children:"Rendez-vous confirmé avec succès !"}),w==="error"&&e.jsxs(f.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-red-600 dark:text-red-400 text-center",children:["Erreur : ",E]})]})]})}),e.jsx($,{className:"text-sm text-muted-foreground",children:"Les rendez-vous sont disponibles du lundi au vendredi, de 9h à 17h."})]})}export{ie as AppointmentCalendar,ie as default};
