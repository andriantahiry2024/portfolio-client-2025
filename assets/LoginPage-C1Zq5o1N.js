import{j as e}from"./ui-components-DfywtIQG.js";import{r as c,h as b,L as N}from"./react-vendor-CAIQhEhM.js";import{N as v,f as w}from"./Navbar-CVU6jdhU.js";import{u as y}from"./form-utils-BrWWUA8f.js";import{u as F,B as S,L}from"./index-B-XMBNW3.js";import{I as d}from"./input-CSefcprY.js";import{F as E,a as u,b as x,c as p,d as h,e as j}from"./form-D3YMiyl3.js";import C from"./Footer-CnNADsrv.js";import"./x-DSUXltcW.js";import"./framer-motion-DP8BS7SU.js";import"./label-CYifw2dq.js";import"./mail-yrCF_RWq.js";import"./phone-CBz64ES4.js";import"./github-BqoBec94.js";import"./linkedin-BPno9vNk.js";const $=()=>{const[n,i]=c.useState(""),[r,l]=c.useState(!1),f=b(),{toast:m}=F(),a=y({defaultValues:{email:"",password:""}}),g=async o=>{i(""),l(!0);try{const s=await w("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),t=await s.json();if(!s.ok)throw new Error(t.error||`HTTP error! status: ${s.status}`);localStorage.setItem("authToken",t.token),m({title:"Connexion réussie",description:"Vous êtes maintenant connecté.",variant:"success"}),console.log("Login successful, redirecting to /admin"),f("/admin")}catch(s){console.error("Erreur lors de la connexion:",s);const t=s.message||"Une erreur est survenue lors de la connexion.";i(t),m({title:"Erreur de connexion",description:t,variant:"destructive"}),localStorage.removeItem("authToken")}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsx("main",{className:"pt-20 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full mx-auto p-6 bg-card text-card-foreground rounded-lg shadow-md border border-border",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center",children:"Connexion"}),e.jsx(E,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(g),className:"space-y-6",children:[e.jsx(u,{control:a.control,name:"email",rules:{required:"Email est requis"},render:({field:o})=>e.jsxs(x,{children:[e.jsx(p,{children:"Email"}),e.jsx(h,{children:e.jsx(d,{type:"email",placeholder:"nom@exemple.com",...o,disabled:r})}),e.jsx(j,{})]})}),e.jsx(u,{control:a.control,name:"password",rules:{required:"Mot de passe est requis"},render:({field:o})=>e.jsxs(x,{children:[e.jsx(p,{children:"Mot de passe"}),e.jsx(h,{children:e.jsx(d,{type:"password",placeholder:"********",...o,disabled:r})}),e.jsx(j,{})]})}),n&&e.jsx("p",{className:"text-sm text-red-600",children:n}),e.jsxs(S,{type:"submit",className:"w-full",disabled:r,children:[r&&e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Connexion...":"Se Connecter"]})]})}),e.jsxs("p",{className:"mt-4 text-center text-sm",children:["Pas encore de compte ? ",e.jsx(N,{to:"/create-user",className:"text-indigo-600 hover:underline",children:"Inscrivez-vous"})]})]})}),e.jsx(C,{})]})};export{$ as default};
