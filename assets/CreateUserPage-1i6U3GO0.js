import{j as e}from"./ui-components-DfywtIQG.js";import{N as g}from"./Navbar-Br-R-wJO.js";import F from"./Footer-CfcIY-60.js";import{r as c}from"./react-vendor-CAIQhEhM.js";import{u as w}from"./form-utils-BrWWUA8f.js";import{B as y,L as C}from"./index-BO6rIt2l.js";import{I as a}from"./input-CSwwItPP.js";import{F as E,a as n,b as i,c as l,d as m,e as d}from"./form-C1XMHbEb.js";import"./x-B-daqFj6.js";import"./framer-motion-DP8BS7SU.js";import"./mail-CwJOVsX5.js";import"./phone-CvBEarNu.js";import"./github-DavO58m_.js";import"./linkedin-Cdv_FBcC.js";import"./label-BWDTXRGg.js";const S=()=>{const[x,p]=c.useState(""),[u,j]=c.useState(""),[s,h]=c.useState(!1),t=w({defaultValues:{email:"",password:"",firstName:"",lastName:""}}),b=async r=>{p(""),j(""),h(!0);const N="https://backend.teckforgeek.com/api/users";try{const o=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),f=await o.json();if(!o.ok)throw new Error(f.error||`HTTP error! status: ${o.status}`);p(`Utilisateur créé avec succès ! ID: ${f.id}`),t.reset()}catch(o){console.error("Erreur lors de la création de l'utilisateur:",o),j(o.message||"Une erreur est survenue.")}finally{h(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-6 bg-card text-card-foreground rounded-lg shadow-md border border-border",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Créer un nouvel utilisateur"}),e.jsx(E,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(b),className:"space-y-6",children:[e.jsx(n,{control:t.control,name:"email",rules:{required:"Email est requis"},render:({field:r})=>e.jsxs(i,{children:[e.jsx(l,{children:"Email"}),e.jsx(m,{children:e.jsx(a,{type:"email",placeholder:"nom@exemple.com",...r,disabled:s})}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"firstName",render:({field:r})=>e.jsxs(i,{children:[e.jsx(l,{children:"Prénom (optionnel)"}),e.jsx(m,{children:e.jsx(a,{placeholder:"Votre prénom",...r,disabled:s})}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"lastName",render:({field:r})=>e.jsxs(i,{children:[e.jsx(l,{children:"Nom (optionnel)"}),e.jsx(m,{children:e.jsx(a,{placeholder:"Votre nom de famille",...r,disabled:s})}),e.jsx(d,{})]})}),e.jsx(n,{control:t.control,name:"password",rules:{required:"Mot de passe est requis"},render:({field:r})=>e.jsxs(i,{children:[e.jsx(l,{children:"Mot de passe"}),e.jsx(m,{children:e.jsx(a,{type:"password",placeholder:"********",...r,disabled:s})}),e.jsx(d,{})]})}),e.jsxs(y,{type:"submit",className:"w-full",disabled:s,children:[s&&e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Création...":"Créer Utilisateur"]})]})}),x&&e.jsx("p",{className:"mt-4 text-sm text-green-600",children:x}),u&&e.jsxs("p",{className:"mt-4 text-sm text-red-600",children:["Erreur: ",u]})]})},J=()=>e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsxs("main",{className:"pt-20 min-h-screen",children:[" ",e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[" ",e.jsx(S,{})]})]}),e.jsx(F,{})]});export{J as default};
