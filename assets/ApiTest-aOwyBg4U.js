import{j as s}from"./ui-components-DfywtIQG.js";import{r as c}from"./react-vendor-CAIQhEhM.js";function b(){const[l,d]=c.useState(null),[p,n]=c.useState(!0),[u,a]=c.useState(null),[m,t]=c.useState("");c.useEffect(()=>{(async()=>{try{t("Tentative de connexion à http://localhost:3001/...");const e=new XMLHttpRequest;e.open("GET","/api/",!0),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Accept","application/json"),e.onload=function(){if(t(r=>r+`
Réponse reçue avec statut: ${e.status}`),e.status>=200&&e.status<300)try{const r=JSON.parse(e.responseText);t(o=>o+`
Données JSON reçues avec succès`),d(r),n(!1)}catch(r){t(o=>o+`
Erreur de parsing JSON: ${r}`),a("Erreur lors du parsing de la réponse JSON"),n(!1)}else t(r=>r+`
Erreur HTTP: ${e.status}`),a(`Erreur HTTP: ${e.status}`),n(!1)},e.onerror=function(){t(r=>r+`
Erreur de connexion réseau`),a("Erreur de connexion réseau. Vérifiez que le serveur backend est en cours d'exécution."),n(!1)},e.send()}catch(e){const r=e instanceof Error?e.message:"Une erreur inconnue est survenue";t(o=>o+`
Erreur: ${r}`),a(r),n(!1)}})()},[]);const x=()=>{n(!0),a(null),t(""),d(null)};return s.jsxs("div",{className:"p-4 border rounded-lg shadow-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Test de l'API Backend"}),s.jsx("div",{className:"mb-4 p-2 bg-gray-100 rounded text-sm font-mono whitespace-pre-wrap",children:m||"Aucune information de requête disponible"}),p&&s.jsx("div",{className:"p-2 bg-blue-100 rounded",children:"Chargement..."}),u&&s.jsxs("div",{className:"p-2 bg-red-100 rounded mb-4",children:[s.jsxs("p",{className:"text-red-600 font-semibold",children:["Erreur: ",u]}),s.jsx("button",{onClick:x,className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Réessayer"})]}),l&&s.jsxs("div",{className:"p-2 bg-green-100 rounded",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Message:"})," ",l.message]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Status:"})," ",l.status]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"font-semibold",children:"Endpoints disponibles:"}),s.jsx("ul",{className:"list-disc pl-5",children:l.endpoints.map((i,e)=>s.jsx("li",{children:i},e))})]})]})]})}export{b as default};
